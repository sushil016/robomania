# ğŸ¯ Multi-Competition System - Visual Overview

## ğŸ“Š System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER INTERFACE                          â”‚
â”‚                                                                 â”‚
â”‚  [Select Competitions] â†’ [Team Info] â†’ [Bot Details] â†’ [Pay]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          BACKEND APIs                           â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ Check         â”‚  â”‚ Create       â”‚  â”‚ Verify       â”‚        â”‚
â”‚  â”‚ Registration  â”‚â†’ â”‚ Order        â”‚â†’ â”‚ Payment      â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                   â”‚                   â”‚               â”‚
â”‚         â–¼                   â–¼                   â–¼               â”‚
â”‚  Returns team info   Creates Razorpay    Updates statuses      â”‚
â”‚  + competitions      order + saves       to COMPLETED           â”‚
â”‚  + saved bots        registrations                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       SUPABASE DATABASE                         â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ teams        â”‚â—„â”€â”€â”€â”€â”   â”‚ bots            â”‚                 â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
â”‚  â”‚ id           â”‚     â”‚   â”‚ id              â”‚                 â”‚
â”‚  â”‚ team_name    â”‚     â”‚   â”‚ user_email      â”‚                 â”‚
â”‚  â”‚ team_locked  â”‚     â”‚   â”‚ bot_name        â”‚                 â”‚
â”‚  â”‚ status       â”‚     â”‚   â”‚ weight          â”‚                 â”‚
â”‚  â”‚ payment_...  â”‚     â”‚   â”‚ dimensions      â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚ weapon_type     â”‚                 â”‚
â”‚         â–³             â”‚   â”‚ is_weapon_bot   â”‚                 â”‚
â”‚         â”‚             â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚         â”‚             â”‚            â–³                           â”‚
â”‚         â”‚             â”‚            â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚ competition_registrations              â”‚                   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
â”‚  â”‚ id                                     â”‚                   â”‚
â”‚  â”‚ team_id        (FK â†’ teams)            â”‚                   â”‚
â”‚  â”‚ bot_id         (FK â†’ bots)             â”‚                   â”‚
â”‚  â”‚ competition_type ('ROBOWARS', ...)     â”‚                   â”‚
â”‚  â”‚ amount                                 â”‚                   â”‚
â”‚  â”‚ payment_status ('PENDING', ...)        â”‚                   â”‚
â”‚  â”‚ registration_status                    â”‚                   â”‚
â”‚  â”‚ payment_id                             â”‚                   â”‚
â”‚  â”‚ payment_date                           â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                 â”‚
â”‚  UNIQUE(team_id, competition_type) â† No duplicate registrationsâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Registration Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NEW USER FIRST TIME                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. User visits /team-register
   â”‚
   â”œâ”€â†’ Call: GET /api/check-registration?email=xxx
   â”‚   Response: { hasRegistered: false }
   â”‚
2. User selects competitions
   â”œâ”€ [âœ“] RoboWars (â‚¹300)
   â”œâ”€ [âœ“] RoboSoccer (â‚¹200)
   â”‚
3. User enters team details
   â”œâ”€ Team Name: "Robo Warriors"
   â”œâ”€ Leader: John Doe
   â”œâ”€ Members: [...]
   â”‚
4. User enters bot details
   â”œâ”€ For RoboWars: Create "Destroyer" (7.5kg, Hammer)
   â”‚   â†’ POST /api/bots/save (saves to bots table)
   â”œâ”€ For RoboSoccer: Reuse "Destroyer"
   â”‚   â†’ Bot already saved, just link
   â”‚
5. User clicks "Pay Now"
   â”‚
   â”œâ”€â†’ POST /api/create-order
   â”‚   Request: {
   â”‚     teamId: "xxx",
   â”‚     competitions: [
   â”‚       { competition: "ROBOWARS", amount: 300, botId: "bot-1" },
   â”‚       { competition: "ROBOSOCCER", amount: 200, botId: "bot-1" }
   â”‚     ]
   â”‚   }
   â”‚   
   â”‚   Backend creates:
   â”‚   â”œâ”€ Razorpay order (â‚¹500)
   â”‚   â”œâ”€ 2 rows in competition_registrations (PENDING)
   â”‚   â””â”€ Updates teams.payment_id
   â”‚
6. User completes Razorpay payment
   â”‚
   â”œâ”€â†’ POST /api/payment/verify
   â”‚   
   â”‚   Backend updates:
   â”‚   â”œâ”€ competition_registrations: payment_status = COMPLETED
   â”‚   â”œâ”€ competition_registrations: registration_status = CONFIRMED
   â”‚   â””â”€ teams: status = CONFIRMED
   â”‚
7. User redirected to /dashboard
   â”‚
   â””â”€â†’ Shows: 2 CONFIRMED competitions âœ…


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  EXISTING USER RETURNS                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. User visits /team-register
   â”‚
   â”œâ”€â†’ Call: GET /api/check-registration?email=xxx
   â”‚   Response: {
   â”‚     hasRegistered: true,
   â”‚     teamId: "xxx",
   â”‚     teamName: "Robo Warriors",
   â”‚     teamLocked: true,
   â”‚     registeredCompetitions: [
   â”‚       { competition_type: "ROBOWARS", ... },
   â”‚       { competition_type: "ROBOSOCCER", ... }
   â”‚     ],
   â”‚     savedBots: [
   â”‚       { bot_name: "Destroyer", ... }
   â”‚     ]
   â”‚   }
   â”‚
2. Team name is PRE-FILLED and LOCKED âœ…
   â”œâ”€ Team Name: "Robo Warriors" (cannot change)
   â”‚
3. User selects NEW competition to add
   â”œâ”€ [ ] RoboWars (already registered)
   â”œâ”€ [ ] RoboSoccer (already registered)
   â”œâ”€ [âœ“] RoboRace (NEW! â‚¹200)
   â”‚
4. User selects bot for RoboRace
   â”œâ”€ Use Existing Bot: [Dropdown]
   â”‚   â””â”€ "Destroyer" (already saved)
   â”‚   â””â”€ "Speedy" (another saved bot)
   â”‚   â””â”€ Create New Bot
   â”‚
5. User clicks "Pay Now"
   â”‚
   â”œâ”€â†’ POST /api/create-order
   â”‚   Request: {
   â”‚     teamId: "xxx",  (existing team)
   â”‚     competitions: [
   â”‚       { competition: "ROBORACE", amount: 200, botId: "bot-1" }
   â”‚     ]
   â”‚   }
   â”‚   
   â”‚   Backend creates:
   â”‚   â”œâ”€ Razorpay order (â‚¹200 only for new competition)
   â”‚   â””â”€ 1 row in competition_registrations (PENDING)
   â”‚
6. Payment â†’ Verify â†’ CONFIRMED
   â”‚
7. Dashboard now shows: 3 CONFIRMED competitions âœ…
```

---

## ğŸ¤– Bot Reuse Example

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Bot: "Speedy" (Non-weapon bot)                           â”‚
â”‚  â”œâ”€ Weight: 3.0 kg                                         â”‚
â”‚  â”œâ”€ Dimensions: 30x30x25 cm                               â”‚
â”‚  â”œâ”€ Weapon Type: None                                      â”‚
â”‚  â””â”€ is_weapon_bot: false                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â–¼             â–¼             â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ RoboSoccer   â”‚ â”‚ RoboWarsâ”‚ â”‚ RoboRaceâ”‚
         â”‚ (Allowed)    â”‚ â”‚ (Wedge) â”‚ â”‚ (Allowedâ”‚
         â”‚ â‚¹200         â”‚ â”‚ â‚¹300    â”‚ â”‚ â‚¹200    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         
         SAME BOT USED IN 3 COMPETITIONS! âœ…
         Total: â‚¹700
         Saved time: No need to re-enter bot details
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Bot: "Destroyer" (Combat bot)                            â”‚
â”‚  â”œâ”€ Weight: 7.5 kg                                         â”‚
â”‚  â”œâ”€ Dimensions: 40x40x35 cm                               â”‚
â”‚  â”œâ”€ Weapon Type: Hammer                                    â”‚
â”‚  â””â”€ is_weapon_bot: true                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ RoboWars     â”‚
         â”‚ (Perfect!)   â”‚
         â”‚ â‚¹300         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         
         Cannot use in RoboSoccer (weapon not allowed)
         Cannot use in RoboRace (too heavy)
```

---

## ğŸ“Š Database Queries Visualization

### Query 1: Get all competitions for a team
```sql
SELECT * FROM team_registrations_view 
WHERE team_id = 'xxx';
```

**Returns:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ competition â”‚ amount   â”‚ payment    â”‚ bot_name   â”‚ status   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ROBOWARS    â”‚ â‚¹300     â”‚ COMPLETED  â”‚ Destroyer  â”‚CONFIRMED â”‚
â”‚ ROBOSOCCER  â”‚ â‚¹200     â”‚ COMPLETED  â”‚ Destroyer  â”‚CONFIRMED â”‚
â”‚ ROBORACE    â”‚ â‚¹200     â”‚ PENDING    â”‚ Speedy     â”‚ PENDING  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Query 2: Get user's saved bots
```sql
SELECT * FROM bots WHERE user_email = 'xxx';
```

**Returns:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ bot_name   â”‚ weight  â”‚ weapon_type  â”‚ is_weapon_botâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Destroyer  â”‚ 7.5 kg  â”‚ Hammer       â”‚ true         â”‚
â”‚ Speedy     â”‚ 3.0 kg  â”‚ null         â”‚ false        â”‚
â”‚ Tank       â”‚ 8.0 kg  â”‚ Flipper      â”‚ true         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’° Payment Breakdown Example

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PAYMENT SUMMARY                       â”‚
â”‚                                                          â”‚
â”‚  Team: Robo Warriors                                     â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ RoboWars                             â‚¹300   â”‚        â”‚
â”‚  â”‚ Bot: Destroyer (7.5kg, Hammer)             â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ RoboSoccer                           â‚¹200   â”‚        â”‚
â”‚  â”‚ Bot: Destroyer (reused)                    â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ RoboRace                             â‚¹200   â”‚        â”‚
â”‚  â”‚ Bot: Speedy (3kg, Racing)                  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚
â”‚  TOTAL                                   â‚¹700           â”‚
â”‚                                                          â”‚
â”‚  [Pay with Razorpay]                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Use Case Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Action    â”‚ RoboWars â”‚RoboSoccerâ”‚ RoboRace â”‚ Total   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ New user       â”‚    âœ“     â”‚    âœ“     â”‚    âœ“     â”‚  â‚¹700   â”‚
â”‚ registers all  â”‚  (New)   â”‚  (New)   â”‚  (New)   â”‚         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ New user       â”‚    âœ“     â”‚    -     â”‚    -     â”‚  â‚¹300   â”‚
â”‚ registers one  â”‚  (New)   â”‚          â”‚          â”‚         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Existing user  â”‚    âœ“     â”‚    âœ“     â”‚    âœ“     â”‚  â‚¹200   â”‚
â”‚ adds RoboRace  â”‚ (Exists) â”‚ (Exists) â”‚  (New)   â”‚         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ User reuses    â”‚    âœ“     â”‚    âœ“     â”‚    -     â”‚  â‚¹500   â”‚
â”‚ same bot       â”‚ (Bot A)  â”‚ (Bot A)  â”‚          â”‚  1 bot  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Security & Validation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     VALIDATION FLOW                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Request: POST /api/create-order
â”‚
â”œâ”€ âœ“ Check teamId or userEmail provided
â”œâ”€ âœ“ Validate competitions array exists
â”œâ”€ âœ“ Validate each competition has amount > 0
â”œâ”€ âœ“ Check team exists in database
â”œâ”€ âœ“ Calculate total amount
â”œâ”€ âœ“ Check for duplicate registrations (UNIQUE constraint)
â”œâ”€ âœ“ Verify bot_id exists if provided
â””â”€ âœ… Create Razorpay order

Payment: POST /api/payment/verify
â”‚
â”œâ”€ âœ“ Verify Razorpay signature (HMAC SHA256)
â”œâ”€ âœ“ Check orderId matches payment_id
â”œâ”€ âœ“ Update competition_registrations atomically
â”œâ”€ âœ“ Update teams table for backward compatibility
â””â”€ âœ… Return success
```

---

## ğŸ“ˆ Performance Considerations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OPTIMIZATIONS                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Indexes Created:
   â”œâ”€ idx_bots_user_email (Fast bot lookup per user)
   â”œâ”€ idx_comp_reg_team_id (Fast competition lookup per team)
   â”œâ”€ idx_comp_reg_competition (Fast stats by competition)
   â””â”€ idx_comp_reg_payment_status (Fast payment queries)

2. View Created:
   â””â”€ team_registrations_view (Pre-joined data, faster reads)

3. UNIQUE Constraints:
   â””â”€ (team_id, competition_type) prevents duplicate registrations

4. Foreign Keys with CASCADE:
   â”œâ”€ team_id ON DELETE CASCADE (cleanup)
   â””â”€ bot_id ON DELETE SET NULL (preserve registrations)

5. Timestamps:
   â”œâ”€ created_at (track registration time)
   â”œâ”€ updated_at (auto-updated on changes)
   â””â”€ payment_date (track payment time)
```

---

## ğŸ¨ Dashboard Visualization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MY DASHBOARD                                          [Logout]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ğŸ‘¥ TEAM INFORMATION                                 â”‚     â”‚
â”‚  â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚     â”‚
â”‚  â”‚ Team Name:     Robo Warriors     ğŸ”’ Locked          â”‚     â”‚
â”‚  â”‚ Institution:   MIT                                  â”‚     â”‚
â”‚  â”‚ Leader:        John Doe                             â”‚     â”‚
â”‚  â”‚ Members:       4 people                             â”‚     â”‚
â”‚  â”‚ Created:       Jan 15, 2025                         â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ğŸ† REGISTERED COMPETITIONS (3)                      â”‚     â”‚
â”‚  â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚     â”‚
â”‚  â”‚                                                     â”‚     â”‚
â”‚  â”‚  âœ… RoboWars                    [CONFIRMED]         â”‚     â”‚
â”‚  â”‚     ğŸ’° â‚¹300 | Paid on Jan 15                       â”‚     â”‚
â”‚  â”‚     ğŸ¤– Bot: Destroyer (7.5kg, Hammer)              â”‚     â”‚
â”‚  â”‚     ğŸ“„ Payment ID: order_Rmi...                    â”‚     â”‚
â”‚  â”‚                                                     â”‚     â”‚
â”‚  â”‚  âœ… RoboSoccer                  [CONFIRMED]         â”‚     â”‚
â”‚  â”‚     ğŸ’° â‚¹200 | Paid on Jan 15                       â”‚     â”‚
â”‚  â”‚     ğŸ¤– Bot: Destroyer (reused)                     â”‚     â”‚
â”‚  â”‚     ğŸ“„ Payment ID: order_Rmi...                    â”‚     â”‚
â”‚  â”‚                                                     â”‚     â”‚
â”‚  â”‚  â³ RoboRace                    [PENDING]           â”‚     â”‚
â”‚  â”‚     ğŸ’° â‚¹200 | Payment pending                      â”‚     â”‚
â”‚  â”‚     ğŸ¤– Bot: Speedy (3kg, Racing)                   â”‚     â”‚
â”‚  â”‚     [Complete Payment â†’]                           â”‚     â”‚
â”‚  â”‚                                                     â”‚     â”‚
â”‚  â”‚  [+ Register for More Competitions]                â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ğŸ¤– MY BOTS LIBRARY (2)                              â”‚     â”‚
â”‚  â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” â”‚     â”‚
â”‚  â”‚                                                     â”‚     â”‚
â”‚  â”‚  ğŸ”§ Destroyer                                       â”‚     â”‚
â”‚  â”‚     Weight: 7.5kg | Weapon: Hammer                 â”‚     â”‚
â”‚  â”‚     Used in: RoboWars, RoboSoccer                  â”‚     â”‚
â”‚  â”‚     [Edit] [Delete]                                â”‚     â”‚
â”‚  â”‚                                                     â”‚     â”‚
â”‚  â”‚  ğŸƒ Speedy                                          â”‚     â”‚
â”‚  â”‚     Weight: 3kg | Non-weapon                       â”‚     â”‚
â”‚  â”‚     Used in: RoboRace                              â”‚     â”‚
â”‚  â”‚     [Edit] [Delete]                                â”‚     â”‚
â”‚  â”‚                                                     â”‚     â”‚
â”‚  â”‚  [+ Create New Bot]                                â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Summary

**âœ… BACKEND: 100% Complete**
- All APIs working
- Database schema ready
- Multi-competition support
- Bot reuse functionality
- Team name locking
- Payment tracking

**ğŸ“‹ FRONTEND: Needs Update**
- Update team-register page for multi-competition
- Update dashboard for grouped view
- Add bot selection UI

**ğŸ“š DOCUMENTATION: Complete**
- Implementation guide
- API documentation
- Migration script
- Quick start guide
- This visual overview

**ğŸš€ Ready to Deploy!**
